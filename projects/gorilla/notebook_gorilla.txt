### 2010-03-27 ###

mysql> select pattern,count(*) from counts_sites where has_cpg=0 and gap=0 group by pattern;
+---------+----------+
| pattern | count(*) |
+---------+----------+
| C.G.H   |     5137 |
| C.GH    |    76222 |
| CGH     |  7461546 |
| G.CH    |   170475 |
| H.CG    |    54708 |
+---------+----------+
5 rows in set (1 min 48.44 sec)

mysql> select pattern,count(*) from counts_sites where has_cpg=0 and gap=1 group by pattern;
+---------+----------+
| pattern | count(*) |
+---------+----------+
| C.G.H   |    24897 |
| C.GH    |   335683 |
| G.CH    |   325918 |
| H.CG    |    62089 |
+---------+----------+
4 rows in set (16.88 sec)

mysql> select tree_pattern,count(*) from counts_genes group by tree_pattern;
+--------------+----------+
| tree_pattern | count(*) |
+--------------+----------+
| C.GH         |     3446 |
| G.CH         |     8700 |
| H.CG         |     2910 |
+--------------+----------+
3 rows in set (0.20 sec)

R scripts: 

> source("../../scripts/collect_sitewise.R")
> gor.sites = get.vector(con=con,query="select * from gj1_gor_57.counts_sites")


### 2010-03-29 ###

mysql> select tree_pattern,count(*) from counts_genes group by tree_pattern;
+--------------+----------+
| tree_pattern | count(*) |
+--------------+----------+
| C.GH         |     3446 |
| G.CH         |     8700 |
| H.CG         |     2911 |
+--------------+----------+
3 rows in set (0.32 sec)

mysql> select pattern,count(*) from counts_sites where type!="gap" group by pattern;
+---------+----------+
| pattern | count(*) |
+---------+----------+
| C.G.H   |     8172 |
| C.GH    |    96195 |
| CGH     |  7906589 |
| G.CH    |   206369 |
| H.CG    |    71583 |
+---------+----------+
5 rows in set (2 min 13.20 sec)

mysql> select pattern,count(*) from counts_sites where type="gap" group by pattern;
+---------+----------+
| pattern | count(*) |
+---------+----------+
| C.G.H   |    31606 |
| C.GH    |   364830 |
| G.CH    |   353035 |
| H.CG    |    70406 |
+---------+----------+
4 rows in set (19.67 sec)

mysql> select pattern,count(*) from counts_sites where type="synonymous" group by pattern;
+---------+----------+
| pattern | count(*) |
+---------+----------+
| C.G.H   |      878 |
| C.GH    |    46410 |
| G.CH    |    84857 |
| H.CG    |    41803 |
+---------+----------+
4 rows in set (10.12 sec)

mysql> select pattern,count(*) from counts_sites where type="nonsynonymous" group by pattern;
+---------+----------+
| pattern | count(*) |
+---------+----------+
| C.G.H   |     7294 |
| C.GH    |    49785 |
| G.CH    |   121512 |
| H.CG    |    29780 |
+---------+----------+
4 rows in set (10.18 sec)


### 2010-04-15 ###

Ran the pipeline including the orangutan as an outgroup:

mysql> select pattern,count(*) from outgroup_sites where type!='gap' group by pattern;
+---------+----------+
| pattern | count(*) |
+---------+----------+
| C.G.H.O |      739 |
| C.G.HO  |     2166 |
| C.GHO   |    63305 |
| C.H.GO  |     1302 |
| C.O.GH  |     4631 |
| CG.HO   |     5421 |
| CGHO    |  6783906 |
| CH.GO   |    21183 |
| CO.GH   |    13317 |
| G.CHO   |   149093 |
| G.H.CO  |     2395 |
| G.O.CH  |     8291 |
| H.CGO   |    53608 |
| H.O.CG  |     3173 |
| O.CGH   |   260112 |
+---------+----------+
15 rows in set (1 min 48.19 sec)


# SQL query to merge sites tables:
mysql> select * FROM counts_sites a, outgroup_sites b WHERE a.node_id=b.node_id AND a.aln_position=b.aln_position and a.type!='gap' limit 10;


 -> Look at outgroup patterns to resolve mutation events:

mysql> select a.pattern AS hgc,b.pattern AS orang,count(*) FROM counts_sites a, outgroup_sites b WHERE a.node_id=b.node_id AND a.aln_position=b.aln_position and a.type!='gap' and b.type!='gap' group by a.pattern,b.pattern;
+-------+---------+----------+
| hgc   | orang   | count(*) |
+-------+---------+----------+
| C.G.H | C.G.H.O |      171 |
| C.G.H | C.G.HO  |      257 |
| C.G.H | C.H.GO  |      135 |
| C.G.H | G.H.CO  |      421 |
| C.GH  | C.GHO   |     3671 |
| C.GH  | C.O.GH  |      669 |
| C.GH  | CO.GH   |     3442 |
| CGH   | CGHO    |   229016 |
| CGH   | O.CGH   |     7668 |
| G.CH  | CH.GO   |     1167 |
| G.CH  | G.CHO   |    19519 |
| G.CH  | G.O.CH  |      847 |
| H.CG  | CG.HO   |      206 |
| H.CG  | H.CGO   |     2251 |
| H.CG  | H.O.CG  |      159 |
+-------+---------+----------+
15 rows in set (2 min 39.21 sec)


 -> All outgroup patterns:

mysql> select pattern,count(*) from outgroup_sites group by pattern;
+---------+----------+
| pattern | count(*) |
+---------+----------+
| C.G.H.O |     3177 |
| C.G.HO  |    12407 |
| C.GHO   |   236902 |
| C.H.GO  |     5566 |
| C.O.GH  |    22814 |
| CG.HO   |    22205 |
| CGHO    |  6779623 |
| CH.GO   |    52886 |
| CO.GH   |   153245 |
| G.CHO   |   429515 |
| G.H.CO  |    14755 |
| G.O.CH  |    32130 |
| H.CGO   |    97686 |
| H.O.CG  |     9427 |
| O.CGH   |   585610 |
+---------+----------+
15 rows in set (1 min 57.26 sec)
